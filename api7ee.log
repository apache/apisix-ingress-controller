go test ./test/e2e/apisix -test.timeout=80m -v -ginkgo.v -ginkgo.focus="" -ginkgo.label-filter=""
=== RUN   TestAPISIXE2E
  Starting APISIX standalone e2e suite
Running Suite: apisix standalone e2e suite - /Users/ashing/Documents/api7projects/opensource/apisix-ingress-controller/test/e2e/apisix
======================================================================================================================================
Random Seed: [1m1760509036[0m

Will run [1m2[0m of [1m164[0m specs
[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m
[38;5;11mP [PENDING][0m
[0mTest Ingress [38;5;243mGatewayProxy reference Secret [38;5;11m[1mGatewayProxy reference Secret[0m [38;5;204m[networking.k8s.io, ingress][0m
[38;5;243m/Users/ashing/Documents/api7projects/opensource/apisix-ingress-controller/test/e2e/ingress/ingress.go:1004[0m
[38;5;243m------------------------------[0m
[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m
[38;5;243m------------------------------[0m
[0mTest SSL/TLS Conflict Detection [38;5;243mUpdate scenario conflict detection [0m[1mshould reject Ingress update that switches to a conflicting certificate[0m [38;5;204m[webhook][0m
[38;5;243m/Users/ashing/Documents/api7projects/opensource/apisix-ingress-controller/test/e2e/webhook/ssl_conflict.go:983[0m
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:16+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:16+08:00 framework.go:100: apisix admin api key: edd1c9f034335f136f87ad84b625c8f1
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:16+08:00 logger.go:67: Running command kubectl with args [--kubeconfig /tmp/api7-ingress-cluster.kubeconfig --namespace ingress-apisix-e2e-tests-ssl-conflict-test-209977000 apply -f /var/folders/dk/qv6ttnj97xj2nfshk30wfgt40000gn/T/Test%20SSL%2FTLS%20Conflict%20Detection%20Update%20scenario%20conflict%20detection%20should%20reject%20Ingress%20update%20that%20switches%20to%20a%20conflicting%20certificate3949945885]
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:16+08:00 logger.go:67: Running command kubectl with args [--namespace ingress-apisix-e2e-tests-ssl-conflict-test-209977000 apply -f /var/folders/dk/qv6ttnj97xj2nfshk30wfgt40000gn/T/Test%20SSL%2FTLS%20Conflict%20Detection%20Update%20scenario%20conflict%20detection%20should%20reject%20Ingress%20update%20that%20switches%20to%20a%20conflicting%20certificate3067648359]
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:16+08:00 logger.go:67: configmap/apisix-conf created
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:16+08:00 logger.go:67: deployment.apps/apisix created
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:16+08:00 logger.go:67: deployment.apps/httpbin-deployment-e2e-test created
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:16+08:00 logger.go:67: Running command kubectl with args [--kubeconfig /tmp/api7-ingress-cluster.kubeconfig --namespace ingress-apisix-e2e-tests-ssl-conflict-test-209977000 apply -f /var/folders/dk/qv6ttnj97xj2nfshk30wfgt40000gn/T/Test%20SSL%2FTLS%20Conflict%20Detection%20Update%20scenario%20conflict%20detection%20should%20reject%20Ingress%20update%20that%20switches%20to%20a%20conflicting%20certificate3957657463]
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:16+08:00 logger.go:67: service/apisix-standalone created
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:16+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:16+08:00 logger.go:67: service/httpbin-service-e2e-test created
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:16+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:16+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:16+08:00 retry.go:91: Wait for endpoints httpbin-service-e2e-test to be ready.
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:16+08:00 retry.go:103: Wait for endpoints httpbin-service-e2e-test to be ready. returned an error: endpoints not ready yet, expect 1, actual 0. Sleeping for 2s and will try again.
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:17+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:18+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:18+08:00 retry.go:91: Wait for endpoints httpbin-service-e2e-test to be ready.
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:18+08:00 retry.go:103: Wait for endpoints httpbin-service-e2e-test to be ready. returned an error: endpoints not ready yet, expect 1, actual 0. Sleeping for 2s and will try again.
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:20+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:20+08:00 retry.go:91: Wait for endpoints httpbin-service-e2e-test to be ready.
  Service is now available
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:24+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:32+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:48+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:48+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:48+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:48+08:00 tunnel.go:180: Creating a port forwarding tunnel for resource svc/apisix-standalone routing local port 0 to remote port 9080
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:48+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:48+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:48+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:48+08:00 tunnel.go:215: Selected pod apisix-84c49f46c8-hqq56 to open port forward to
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:48+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:48+08:00 tunnel.go:259: Using URL https://127.0.0.1:54364/api/v1/namespaces/ingress-apisix-e2e-tests-ssl-conflict-test-209977000/pods/apisix-84c49f46c8-hqq56/portforward to create portforward
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:48+08:00 tunnel.go:276: Requested local port is 0. Selecting an open port on host system
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:48+08:00 tunnel.go:282: Selected port 52694
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:48+08:00 tunnel.go:308: Successfully created port forwarding tunnel
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:48+08:00 tunnel.go:180: Creating a port forwarding tunnel for resource svc/apisix-standalone routing local port 0 to remote port 9443
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:48+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:48+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:48+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:48+08:00 tunnel.go:215: Selected pod apisix-84c49f46c8-hqq56 to open port forward to
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:48+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:48+08:00 tunnel.go:259: Using URL https://127.0.0.1:54364/api/v1/namespaces/ingress-apisix-e2e-tests-ssl-conflict-test-209977000/pods/apisix-84c49f46c8-hqq56/portforward to create portforward
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:48+08:00 tunnel.go:276: Requested local port is 0. Selecting an open port on host system
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:48+08:00 tunnel.go:282: Selected port 52696
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:48+08:00 tunnel.go:308: Successfully created port forwarding tunnel
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:48+08:00 tunnel.go:180: Creating a port forwarding tunnel for resource svc/apisix-standalone routing local port 0 to remote port 9100
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:48+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:48+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:48+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:48+08:00 tunnel.go:215: Selected pod apisix-84c49f46c8-hqq56 to open port forward to
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:48+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:48+08:00 tunnel.go:259: Using URL https://127.0.0.1:54364/api/v1/namespaces/ingress-apisix-e2e-tests-ssl-conflict-test-209977000/pods/apisix-84c49f46c8-hqq56/portforward to create portforward
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:48+08:00 tunnel.go:276: Requested local port is 0. Selecting an open port on host system
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:48+08:00 tunnel.go:282: Selected port 52698
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:48+08:00 tunnel.go:308: Successfully created port forwarding tunnel
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:48+08:00 tunnel.go:180: Creating a port forwarding tunnel for resource svc/apisix-standalone routing local port 0 to remote port 9110
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:48+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:48+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:48+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:48+08:00 tunnel.go:215: Selected pod apisix-84c49f46c8-hqq56 to open port forward to
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:48+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:48+08:00 tunnel.go:259: Using URL https://127.0.0.1:54364/api/v1/namespaces/ingress-apisix-e2e-tests-ssl-conflict-test-209977000/pods/apisix-84c49f46c8-hqq56/portforward to create portforward
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:48+08:00 tunnel.go:276: Requested local port is 0. Selecting an open port on host system
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:48+08:00 tunnel.go:282: Selected port 52701
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:48+08:00 tunnel.go:308: Successfully created port forwarding tunnel
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:48+08:00 logger.go:67: Running command kubectl with args [--kubeconfig /tmp/api7-ingress-cluster.kubeconfig --namespace ingress-apisix-e2e-tests-ssl-conflict-test-209977000 apply -f /var/folders/dk/qv6ttnj97xj2nfshk30wfgt40000gn/T/Test%20SSL%2FTLS%20Conflict%20Detection%20Update%20scenario%20conflict%20detection%20should%20reject%20Ingress%20update%20that%20switches%20to%20a%20conflicting%20certificate3522604407]
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:49+08:00 logger.go:67: secret/webhook-server-certs created
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:49+08:00 logger.go:67: Running command kubectl with args [--kubeconfig /tmp/api7-ingress-cluster.kubeconfig apply -f /var/folders/dk/qv6ttnj97xj2nfshk30wfgt40000gn/T/Test%20SSL%2FTLS%20Conflict%20Detection%20Update%20scenario%20conflict%20detection%20should%20reject%20Ingress%20update%20that%20switches%20to%20a%20conflicting%20certificate4119446264]
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:49+08:00 logger.go:67: validatingwebhookconfiguration.admissionregistration.k8s.io/test-webhook-ingress-apisix-e2e-tests-ssl-conflict-test-209977000 created
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:49+08:00 logger.go:67: Running command kubectl with args [--namespace ingress-apisix-e2e-tests-ssl-conflict-test-209977000 apply -f /var/folders/dk/qv6ttnj97xj2nfshk30wfgt40000gn/T/Test%20SSL%2FTLS%20Conflict%20Detection%20Update%20scenario%20conflict%20detection%20should%20reject%20Ingress%20update%20that%20switches%20to%20a%20conflicting%20certificate1222078798]
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:49+08:00 logger.go:67: serviceaccount/apisix-ingress-controller-manager created
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:49+08:00 logger.go:67: role.rbac.authorization.k8s.io/apisix-ingress-leader-election-role created
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:49+08:00 logger.go:67: clusterrole.rbac.authorization.k8s.io/ingress-apisix-e2e-tests-ssl-conflict-test-209977000-apisix-ingress-manager-role created
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:49+08:00 logger.go:67: clusterrole.rbac.authorization.k8s.io/ingress-apisix-e2e-tests-ssl-conflict-test-209977000-apisix-ingress-metrics-auth-role created
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:49+08:00 logger.go:67: clusterrole.rbac.authorization.k8s.io/ingress-apisix-e2e-tests-ssl-conflict-test-209977000-apisix-ingress-metrics-reader created
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:49+08:00 logger.go:67: rolebinding.rbac.authorization.k8s.io/apisix-ingress-leader-election-rolebinding created
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:49+08:00 logger.go:67: clusterrolebinding.rbac.authorization.k8s.io/ingress-apisix-e2e-tests-ssl-conflict-test-209977000-apisix-ingress-manager-rolebinding created
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:49+08:00 logger.go:67: clusterrolebinding.rbac.authorization.k8s.io/ingress-apisix-e2e-tests-ssl-conflict-test-209977000-apisix-ingress-metrics-auth-rolebinding created
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:49+08:00 logger.go:67: configmap/ingress-config created
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:49+08:00 logger.go:67: service/apisix-ingress-controller-manager-metrics-service created
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:49+08:00 logger.go:67: deployment.apps/apisix-ingress-controller-manager created
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:49+08:00 logger.go:67: service/webhook-service created
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:49+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:49+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:50+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:52+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:17:56+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:18:04+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:18:04+08:00 tunnel.go:180: Creating a port forwarding tunnel for resource svc/apisix-standalone routing local port 0 to remote port 9180
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:18:04+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:18:04+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:18:04+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:18:04+08:00 tunnel.go:215: Selected pod apisix-84c49f46c8-hqq56 to open port forward to
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:18:04+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:18:04+08:00 tunnel.go:259: Using URL https://127.0.0.1:54364/api/v1/namespaces/ingress-apisix-e2e-tests-ssl-conflict-test-209977000/pods/apisix-84c49f46c8-hqq56/portforward to create portforward
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:18:04+08:00 tunnel.go:276: Requested local port is 0. Selecting an open port on host system
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:18:04+08:00 tunnel.go:282: Selected port 52729
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:18:05+08:00 tunnel.go:308: Successfully created port forwarding tunnel
  [1mSTEP:[0m creating GatewayProxy [38;5;243m@ 10/15/25 14:18:05.034[0m
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:18:05+08:00 logger.go:67: Running command kubectl with args [--kubeconfig /tmp/api7-ingress-cluster.kubeconfig --namespace ingress-apisix-e2e-tests-ssl-conflict-test-209977000 apply -f /var/folders/dk/qv6ttnj97xj2nfshk30wfgt40000gn/T/Test%20SSL%2FTLS%20Conflict%20Detection%20Update%20scenario%20conflict%20detection%20should%20reject%20Ingress%20update%20that%20switches%20to%20a%20conflicting%20certificate738713874]
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:18:05+08:00 logger.go:67: gatewayproxy.apisix.apache.org/apisix-proxy-config created
  [1mSTEP:[0m creating GatewayClass [38;5;243m@ 10/15/25 14:18:10.305[0m
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:18:10+08:00 logger.go:67: Running command kubectl with args [--kubeconfig /tmp/api7-ingress-cluster.kubeconfig --namespace ingress-apisix-e2e-tests-ssl-conflict-test-209977000 apply -f /var/folders/dk/qv6ttnj97xj2nfshk30wfgt40000gn/T/Test%20SSL%2FTLS%20Conflict%20Detection%20Update%20scenario%20conflict%20detection%20should%20reject%20Ingress%20update%20that%20switches%20to%20a%20conflicting%20certificate2643062583]
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:18:10+08:00 logger.go:67: gatewayclass.gateway.networking.k8s.io/ingress-apisix-e2e-tests-ssl-conflict-test-209977000 created
  [1mSTEP:[0m creating IngressClass [38;5;243m@ 10/15/25 14:18:12.422[0m
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:18:12+08:00 logger.go:67: Running command kubectl with args [--kubeconfig /tmp/api7-ingress-cluster.kubeconfig apply -f /var/folders/dk/qv6ttnj97xj2nfshk30wfgt40000gn/T/Test%20SSL%2FTLS%20Conflict%20Detection%20Update%20scenario%20conflict%20detection%20should%20reject%20Ingress%20update%20that%20switches%20to%20a%20conflicting%20certificate3177397091]
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:18:12+08:00 logger.go:67: ingressclass.networking.k8s.io/ingress-apisix-e2e-tests-ssl-conflict-test-209977000 created
  [1mSTEP:[0m creating TLS secrets for ingress update test [38;5;243m@ 10/15/25 14:18:14.538[0m
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:18:14+08:00 logger.go:67: Running command kubectl with args [--kubeconfig /tmp/api7-ingress-cluster.kubeconfig --namespace ingress-apisix-e2e-tests-ssl-conflict-test-209977000 apply -f /var/folders/dk/qv6ttnj97xj2nfshk30wfgt40000gn/T/Test%20SSL%2FTLS%20Conflict%20Detection%20Update%20scenario%20conflict%20detection%20should%20reject%20Ingress%20update%20that%20switches%20to%20a%20conflicting%20certificate1950311855]
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:18:14+08:00 logger.go:67: secret/ingress-update-cert-a created
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:18:14+08:00 logger.go:67: Running command kubectl with args [--kubeconfig /tmp/api7-ingress-cluster.kubeconfig --namespace ingress-apisix-e2e-tests-ssl-conflict-test-209977000 apply -f /var/folders/dk/qv6ttnj97xj2nfshk30wfgt40000gn/T/Test%20SSL%2FTLS%20Conflict%20Detection%20Update%20scenario%20conflict%20detection%20should%20reject%20Ingress%20update%20that%20switches%20to%20a%20conflicting%20certificate1798283759]
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:18:14+08:00 logger.go:67: secret/ingress-update-cert-b created
  [1mSTEP:[0m creating ApisixTls with certificate A to establish existing mapping [38;5;243m@ 10/15/25 14:18:14.916[0m
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:18:14+08:00 logger.go:67: Running command kubectl with args [--kubeconfig /tmp/api7-ingress-cluster.kubeconfig --namespace ingress-apisix-e2e-tests-ssl-conflict-test-209977000 apply -f /var/folders/dk/qv6ttnj97xj2nfshk30wfgt40000gn/T/Test%20SSL%2FTLS%20Conflict%20Detection%20Update%20scenario%20conflict%20detection%20should%20reject%20Ingress%20update%20that%20switches%20to%20a%20conflicting%20certificate2473693401]
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:18:15+08:00 logger.go:67: apisixtls.apisix.apache.org/tls-update-baseline created
  [1mSTEP:[0m creating backend service for ingress update test [38;5;243m@ 10/15/25 14:18:17.019[0m
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:18:17+08:00 logger.go:67: Running command kubectl with args [--kubeconfig /tmp/api7-ingress-cluster.kubeconfig --namespace ingress-apisix-e2e-tests-ssl-conflict-test-209977000 apply -f /var/folders/dk/qv6ttnj97xj2nfshk30wfgt40000gn/T/Test%20SSL%2FTLS%20Conflict%20Detection%20Update%20scenario%20conflict%20detection%20should%20reject%20Ingress%20update%20that%20switches%20to%20a%20conflicting%20certificate2566552123]
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:18:17+08:00 logger.go:67: service/test-service-update created
  [1mSTEP:[0m creating initial Ingress with matching certificate [38;5;243m@ 10/15/25 14:18:19.116[0m
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:18:19+08:00 logger.go:67: Running command kubectl with args [--kubeconfig /tmp/api7-ingress-cluster.kubeconfig --namespace ingress-apisix-e2e-tests-ssl-conflict-test-209977000 apply -f /var/folders/dk/qv6ttnj97xj2nfshk30wfgt40000gn/T/Test%20SSL%2FTLS%20Conflict%20Detection%20Update%20scenario%20conflict%20detection%20should%20reject%20Ingress%20update%20that%20switches%20to%20a%20conflicting%20certificate2728255370]
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:18:19+08:00 logger.go:67: ingress.networking.k8s.io/ingress-update created
  [1mSTEP:[0m attempting to update Ingress to use conflicting certificate B [38;5;243m@ 10/15/25 14:18:21.265[0m
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:18:21+08:00 logger.go:67: Running command kubectl with args [--kubeconfig /tmp/api7-ingress-cluster.kubeconfig --namespace ingress-apisix-e2e-tests-ssl-conflict-test-209977000 apply -f /var/folders/dk/qv6ttnj97xj2nfshk30wfgt40000gn/T/Test%20SSL%2FTLS%20Conflict%20Detection%20Update%20scenario%20conflict%20detection%20should%20reject%20Ingress%20update%20that%20switches%20to%20a%20conflicting%20certificate3076947321]
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:18:21+08:00 logger.go:67: Error from server (Forbidden): error when applying patch:
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:18:21+08:00 logger.go:67: {"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"networking.k8s.io/v1\",\"kind\":\"Ingress\",\"metadata\":{\"annotations\":{},\"name\":\"ingress-update\",\"namespace\":\"ingress-apisix-e2e-tests-ssl-conflict-test-209977000\"},\"spec\":{\"ingressClassName\":\"ingress-apisix-e2e-tests-ssl-conflict-test-209977000\",\"rules\":[{\"host\":\"ingress-update-conflict.example.com\",\"http\":{\"paths\":[{\"backend\":{\"service\":{\"name\":\"test-service-update\",\"port\":{\"number\":80}}},\"path\":\"/\",\"pathType\":\"Prefix\"}]}}],\"tls\":[{\"hosts\":[\"ingress-update-conflict.example.com\"],\"secretName\":\"ingress-update-cert-b\"}]}}\n"}},"spec":{"tls":[{"hosts":["ingress-update-conflict.example.com"],"secretName":"ingress-update-cert-b"}]}}
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:18:21+08:00 logger.go:67: to:
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:18:21+08:00 logger.go:67: Resource: "networking.k8s.io/v1, Resource=ingresses", GroupVersionKind: "networking.k8s.io/v1, Kind=Ingress"
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:18:21+08:00 logger.go:67: Name: "ingress-update", Namespace: "ingress-apisix-e2e-tests-ssl-conflict-test-209977000"
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:18:21+08:00 logger.go:67: for: "/var/folders/dk/qv6ttnj97xj2nfshk30wfgt40000gn/T/Test%20SSL%2FTLS%20Conflict%20Detection%20Update%20scenario%20conflict%20detection%20should%20reject%20Ingress%20update%20that%20switches%20to%20a%20conflicting%20certificate3076947321": admission webhook "vingress-v1.kb.io" denied the request: SSL configuration conflicts detected:
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:18:21+08:00 logger.go:67: - Host 'ingress-update-conflict.example.com' is already configured with a different certificate in ApisixTls/ingress-apisix-e2e-tests-ssl-conflict-test-209977000/tls-update-baseline
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:18:21+08:00 logger.go:67: Running command kubectl with args [--kubeconfig /tmp/api7-ingress-cluster.kubeconfig delete -f /var/folders/dk/qv6ttnj97xj2nfshk30wfgt40000gn/T/Test%20SSL%2FTLS%20Conflict%20Detection%20Update%20scenario%20conflict%20detection%20should%20reject%20Ingress%20update%20that%20switches%20to%20a%20conflicting%20certificate1967976745]
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:18:21+08:00 logger.go:67: ingressclass.networking.k8s.io "ingress-apisix-e2e-tests-ssl-conflict-test-209977000" deleted
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:18:21+08:00 logger.go:67: Running command kubectl with args [--kubeconfig /tmp/api7-ingress-cluster.kubeconfig delete -f /var/folders/dk/qv6ttnj97xj2nfshk30wfgt40000gn/T/Test%20SSL%2FTLS%20Conflict%20Detection%20Update%20scenario%20conflict%20detection%20should%20reject%20Ingress%20update%20that%20switches%20to%20a%20conflicting%20certificate3496754584]
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:18:21+08:00 logger.go:67: validatingwebhookconfiguration.admissionregistration.k8s.io "test-webhook-ingress-apisix-e2e-tests-ssl-conflict-test-209977000" deleted
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Ingress update that switches to a conflicting certificate 2025-10-15T14:18:21+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
[38;5;10mâ€¢ [68.387 seconds][0m
[38;5;243m------------------------------[0m
[0mTest SSL/TLS Conflict Detection [38;5;243mUpdate scenario conflict detection [0m[1mshould reject Gateway update that switches to a conflicting certificate[0m [38;5;204m[webhook][0m
[38;5;243m/Users/ashing/Documents/api7projects/opensource/apisix-ingress-controller/test/e2e/webhook/ssl_conflict.go:1119[0m
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:24+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:24+08:00 framework.go:100: apisix admin api key: edd1c9f034335f136f87ad84b625c8f1
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:24+08:00 logger.go:67: Running command kubectl with args [--kubeconfig /tmp/api7-ingress-cluster.kubeconfig --namespace ingress-apisix-e2e-tests-ssl-conflict-test-517966000 apply -f /var/folders/dk/qv6ttnj97xj2nfshk30wfgt40000gn/T/Test%20SSL%2FTLS%20Conflict%20Detection%20Update%20scenario%20conflict%20detection%20should%20reject%20Gateway%20update%20that%20switches%20to%20a%20conflicting%20certificate350874152]
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:24+08:00 logger.go:67: Running command kubectl with args [--namespace ingress-apisix-e2e-tests-ssl-conflict-test-517966000 apply -f /var/folders/dk/qv6ttnj97xj2nfshk30wfgt40000gn/T/Test%20SSL%2FTLS%20Conflict%20Detection%20Update%20scenario%20conflict%20detection%20should%20reject%20Gateway%20update%20that%20switches%20to%20a%20conflicting%20certificate3824392958]
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:24+08:00 logger.go:67: configmap/apisix-conf created
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:24+08:00 logger.go:67: deployment.apps/httpbin-deployment-e2e-test created
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:24+08:00 logger.go:67: Running command kubectl with args [--kubeconfig /tmp/api7-ingress-cluster.kubeconfig --namespace ingress-apisix-e2e-tests-ssl-conflict-test-517966000 apply -f /var/folders/dk/qv6ttnj97xj2nfshk30wfgt40000gn/T/Test%20SSL%2FTLS%20Conflict%20Detection%20Update%20scenario%20conflict%20detection%20should%20reject%20Gateway%20update%20that%20switches%20to%20a%20conflicting%20certificate4142265285]
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:24+08:00 logger.go:67: deployment.apps/apisix created
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:24+08:00 logger.go:67: service/apisix-standalone created
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:24+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:24+08:00 logger.go:67: service/httpbin-service-e2e-test created
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:24+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:24+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:24+08:00 retry.go:91: Wait for endpoints httpbin-service-e2e-test to be ready.
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:24+08:00 retry.go:103: Wait for endpoints httpbin-service-e2e-test to be ready. returned an error: endpoints not ready yet, expect 1, actual 0. Sleeping for 2s and will try again.
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:25+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:26+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:26+08:00 retry.go:91: Wait for endpoints httpbin-service-e2e-test to be ready.
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:26+08:00 retry.go:103: Wait for endpoints httpbin-service-e2e-test to be ready. returned an error: endpoints not ready yet, expect 1, actual 0. Sleeping for 2s and will try again.
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:28+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:28+08:00 retry.go:91: Wait for endpoints httpbin-service-e2e-test to be ready.
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:28+08:00 retry.go:103: Wait for endpoints httpbin-service-e2e-test to be ready. returned an error: endpoints not ready yet, expect 1, actual 0. Sleeping for 2s and will try again.
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:30+08:00 retry.go:91: Wait for endpoints httpbin-service-e2e-test to be ready.
  Service is now available
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:32+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:40+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:40+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:40+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:40+08:00 tunnel.go:180: Creating a port forwarding tunnel for resource svc/apisix-standalone routing local port 0 to remote port 9080
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:40+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:40+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:40+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:40+08:00 tunnel.go:215: Selected pod apisix-84c49f46c8-zgtc9 to open port forward to
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:40+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:40+08:00 tunnel.go:259: Using URL https://127.0.0.1:54364/api/v1/namespaces/ingress-apisix-e2e-tests-ssl-conflict-test-517966000/pods/apisix-84c49f46c8-zgtc9/portforward to create portforward
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:40+08:00 tunnel.go:276: Requested local port is 0. Selecting an open port on host system
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:40+08:00 tunnel.go:282: Selected port 52866
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:40+08:00 tunnel.go:308: Successfully created port forwarding tunnel
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:40+08:00 tunnel.go:180: Creating a port forwarding tunnel for resource svc/apisix-standalone routing local port 0 to remote port 9443
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:40+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:40+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:40+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:40+08:00 tunnel.go:215: Selected pod apisix-84c49f46c8-zgtc9 to open port forward to
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:40+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:40+08:00 tunnel.go:259: Using URL https://127.0.0.1:54364/api/v1/namespaces/ingress-apisix-e2e-tests-ssl-conflict-test-517966000/pods/apisix-84c49f46c8-zgtc9/portforward to create portforward
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:40+08:00 tunnel.go:276: Requested local port is 0. Selecting an open port on host system
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:40+08:00 tunnel.go:282: Selected port 52868
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:40+08:00 tunnel.go:308: Successfully created port forwarding tunnel
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:40+08:00 tunnel.go:180: Creating a port forwarding tunnel for resource svc/apisix-standalone routing local port 0 to remote port 9100
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:40+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:40+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:40+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:40+08:00 tunnel.go:215: Selected pod apisix-84c49f46c8-zgtc9 to open port forward to
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:40+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:40+08:00 tunnel.go:259: Using URL https://127.0.0.1:54364/api/v1/namespaces/ingress-apisix-e2e-tests-ssl-conflict-test-517966000/pods/apisix-84c49f46c8-zgtc9/portforward to create portforward
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:40+08:00 tunnel.go:276: Requested local port is 0. Selecting an open port on host system
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:40+08:00 tunnel.go:282: Selected port 52870
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:40+08:00 tunnel.go:308: Successfully created port forwarding tunnel
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:40+08:00 tunnel.go:180: Creating a port forwarding tunnel for resource svc/apisix-standalone routing local port 0 to remote port 9110
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:40+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:40+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:40+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:40+08:00 tunnel.go:215: Selected pod apisix-84c49f46c8-zgtc9 to open port forward to
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:40+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:40+08:00 tunnel.go:259: Using URL https://127.0.0.1:54364/api/v1/namespaces/ingress-apisix-e2e-tests-ssl-conflict-test-517966000/pods/apisix-84c49f46c8-zgtc9/portforward to create portforward
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:40+08:00 tunnel.go:276: Requested local port is 0. Selecting an open port on host system
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:40+08:00 tunnel.go:282: Selected port 52872
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:40+08:00 tunnel.go:308: Successfully created port forwarding tunnel
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:41+08:00 logger.go:67: Running command kubectl with args [--kubeconfig /tmp/api7-ingress-cluster.kubeconfig --namespace ingress-apisix-e2e-tests-ssl-conflict-test-517966000 apply -f /var/folders/dk/qv6ttnj97xj2nfshk30wfgt40000gn/T/Test%20SSL%2FTLS%20Conflict%20Detection%20Update%20scenario%20conflict%20detection%20should%20reject%20Gateway%20update%20that%20switches%20to%20a%20conflicting%20certificate3104636671]
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:41+08:00 logger.go:67: secret/webhook-server-certs created
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:41+08:00 logger.go:67: Running command kubectl with args [--kubeconfig /tmp/api7-ingress-cluster.kubeconfig apply -f /var/folders/dk/qv6ttnj97xj2nfshk30wfgt40000gn/T/Test%20SSL%2FTLS%20Conflict%20Detection%20Update%20scenario%20conflict%20detection%20should%20reject%20Gateway%20update%20that%20switches%20to%20a%20conflicting%20certificate4259389924]
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:41+08:00 logger.go:67: validatingwebhookconfiguration.admissionregistration.k8s.io/test-webhook-ingress-apisix-e2e-tests-ssl-conflict-test-517966000 created
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:41+08:00 logger.go:67: Running command kubectl with args [--namespace ingress-apisix-e2e-tests-ssl-conflict-test-517966000 apply -f /var/folders/dk/qv6ttnj97xj2nfshk30wfgt40000gn/T/Test%20SSL%2FTLS%20Conflict%20Detection%20Update%20scenario%20conflict%20detection%20should%20reject%20Gateway%20update%20that%20switches%20to%20a%20conflicting%20certificate1407942942]
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:41+08:00 logger.go:67: serviceaccount/apisix-ingress-controller-manager created
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:41+08:00 logger.go:67: role.rbac.authorization.k8s.io/apisix-ingress-leader-election-role created
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:41+08:00 logger.go:67: clusterrole.rbac.authorization.k8s.io/ingress-apisix-e2e-tests-ssl-conflict-test-517966000-apisix-ingress-manager-role created
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:41+08:00 logger.go:67: clusterrole.rbac.authorization.k8s.io/ingress-apisix-e2e-tests-ssl-conflict-test-517966000-apisix-ingress-metrics-auth-role created
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:41+08:00 logger.go:67: clusterrole.rbac.authorization.k8s.io/ingress-apisix-e2e-tests-ssl-conflict-test-517966000-apisix-ingress-metrics-reader created
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:41+08:00 logger.go:67: rolebinding.rbac.authorization.k8s.io/apisix-ingress-leader-election-rolebinding created
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:41+08:00 logger.go:67: clusterrolebinding.rbac.authorization.k8s.io/ingress-apisix-e2e-tests-ssl-conflict-test-517966000-apisix-ingress-manager-rolebinding created
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:41+08:00 logger.go:67: clusterrolebinding.rbac.authorization.k8s.io/ingress-apisix-e2e-tests-ssl-conflict-test-517966000-apisix-ingress-metrics-auth-rolebinding created
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:41+08:00 logger.go:67: configmap/ingress-config created
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:41+08:00 logger.go:67: service/apisix-ingress-controller-manager-metrics-service created
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:41+08:00 logger.go:67: deployment.apps/apisix-ingress-controller-manager created
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:41+08:00 logger.go:67: service/webhook-service created
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:41+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:42+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:43+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:45+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:49+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:57+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:57+08:00 tunnel.go:180: Creating a port forwarding tunnel for resource svc/apisix-standalone routing local port 0 to remote port 9180
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:57+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:57+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:57+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:57+08:00 tunnel.go:215: Selected pod apisix-84c49f46c8-zgtc9 to open port forward to
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:57+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:57+08:00 tunnel.go:259: Using URL https://127.0.0.1:54364/api/v1/namespaces/ingress-apisix-e2e-tests-ssl-conflict-test-517966000/pods/apisix-84c49f46c8-zgtc9/portforward to create portforward
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:57+08:00 tunnel.go:276: Requested local port is 0. Selecting an open port on host system
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:57+08:00 tunnel.go:282: Selected port 52921
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:57+08:00 tunnel.go:308: Successfully created port forwarding tunnel
  [1mSTEP:[0m creating GatewayProxy [38;5;243m@ 10/15/25 14:18:57.164[0m
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:57+08:00 logger.go:67: Running command kubectl with args [--kubeconfig /tmp/api7-ingress-cluster.kubeconfig --namespace ingress-apisix-e2e-tests-ssl-conflict-test-517966000 apply -f /var/folders/dk/qv6ttnj97xj2nfshk30wfgt40000gn/T/Test%20SSL%2FTLS%20Conflict%20Detection%20Update%20scenario%20conflict%20detection%20should%20reject%20Gateway%20update%20that%20switches%20to%20a%20conflicting%20certificate3664597198]
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:18:57+08:00 logger.go:67: gatewayproxy.apisix.apache.org/apisix-proxy-config created
  [1mSTEP:[0m creating GatewayClass [38;5;243m@ 10/15/25 14:19:02.41[0m
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:19:02+08:00 logger.go:67: Running command kubectl with args [--kubeconfig /tmp/api7-ingress-cluster.kubeconfig --namespace ingress-apisix-e2e-tests-ssl-conflict-test-517966000 apply -f /var/folders/dk/qv6ttnj97xj2nfshk30wfgt40000gn/T/Test%20SSL%2FTLS%20Conflict%20Detection%20Update%20scenario%20conflict%20detection%20should%20reject%20Gateway%20update%20that%20switches%20to%20a%20conflicting%20certificate1661811642]
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:19:02+08:00 logger.go:67: gatewayclass.gateway.networking.k8s.io/ingress-apisix-e2e-tests-ssl-conflict-test-517966000 created
  [1mSTEP:[0m creating IngressClass [38;5;243m@ 10/15/25 14:19:04.536[0m
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:19:04+08:00 logger.go:67: Running command kubectl with args [--kubeconfig /tmp/api7-ingress-cluster.kubeconfig apply -f /var/folders/dk/qv6ttnj97xj2nfshk30wfgt40000gn/T/Test%20SSL%2FTLS%20Conflict%20Detection%20Update%20scenario%20conflict%20detection%20should%20reject%20Gateway%20update%20that%20switches%20to%20a%20conflicting%20certificate1863466903]
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:19:04+08:00 logger.go:67: ingressclass.networking.k8s.io/ingress-apisix-e2e-tests-ssl-conflict-test-517966000 created
  [1mSTEP:[0m creating TLS secrets for gateway update test [38;5;243m@ 10/15/25 14:19:06.651[0m
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:19:06+08:00 logger.go:67: Running command kubectl with args [--kubeconfig /tmp/api7-ingress-cluster.kubeconfig --namespace ingress-apisix-e2e-tests-ssl-conflict-test-517966000 apply -f /var/folders/dk/qv6ttnj97xj2nfshk30wfgt40000gn/T/Test%20SSL%2FTLS%20Conflict%20Detection%20Update%20scenario%20conflict%20detection%20should%20reject%20Gateway%20update%20that%20switches%20to%20a%20conflicting%20certificate3816217265]
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:19:06+08:00 logger.go:67: secret/gateway-update-cert-a created
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:19:06+08:00 logger.go:67: Running command kubectl with args [--kubeconfig /tmp/api7-ingress-cluster.kubeconfig --namespace ingress-apisix-e2e-tests-ssl-conflict-test-517966000 apply -f /var/folders/dk/qv6ttnj97xj2nfshk30wfgt40000gn/T/Test%20SSL%2FTLS%20Conflict%20Detection%20Update%20scenario%20conflict%20detection%20should%20reject%20Gateway%20update%20that%20switches%20to%20a%20conflicting%20certificate3497624039]
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:19:06+08:00 logger.go:67: secret/gateway-update-cert-b created
  [1mSTEP:[0m creating ApisixTls with certificate A to establish host ownership [38;5;243m@ 10/15/25 14:19:06.991[0m
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:19:06+08:00 logger.go:67: Running command kubectl with args [--kubeconfig /tmp/api7-ingress-cluster.kubeconfig --namespace ingress-apisix-e2e-tests-ssl-conflict-test-517966000 apply -f /var/folders/dk/qv6ttnj97xj2nfshk30wfgt40000gn/T/Test%20SSL%2FTLS%20Conflict%20Detection%20Update%20scenario%20conflict%20detection%20should%20reject%20Gateway%20update%20that%20switches%20to%20a%20conflicting%20certificate4185343214]
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:19:07+08:00 logger.go:67: apisixtls.apisix.apache.org/tls-gateway-update created
  [1mSTEP:[0m creating initial Gateway using certificate A [38;5;243m@ 10/15/25 14:19:09.095[0m
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:19:09+08:00 logger.go:67: Running command kubectl with args [--kubeconfig /tmp/api7-ingress-cluster.kubeconfig --namespace ingress-apisix-e2e-tests-ssl-conflict-test-517966000 apply -f /var/folders/dk/qv6ttnj97xj2nfshk30wfgt40000gn/T/Test%20SSL%2FTLS%20Conflict%20Detection%20Update%20scenario%20conflict%20detection%20should%20reject%20Gateway%20update%20that%20switches%20to%20a%20conflicting%20certificate961430521]
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:19:09+08:00 logger.go:67: gateway.gateway.networking.k8s.io/gateway-update created
  [1mSTEP:[0m attempting to update Gateway to use conflicting certificate B [38;5;243m@ 10/15/25 14:19:11.212[0m
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:19:11+08:00 logger.go:67: Running command kubectl with args [--kubeconfig /tmp/api7-ingress-cluster.kubeconfig --namespace ingress-apisix-e2e-tests-ssl-conflict-test-517966000 apply -f /var/folders/dk/qv6ttnj97xj2nfshk30wfgt40000gn/T/Test%20SSL%2FTLS%20Conflict%20Detection%20Update%20scenario%20conflict%20detection%20should%20reject%20Gateway%20update%20that%20switches%20to%20a%20conflicting%20certificate2899429494]
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:19:11+08:00 logger.go:67: Error from server (Forbidden): error when applying patch:
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:19:11+08:00 logger.go:67: {"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"gateway.networking.k8s.io/v1\",\"kind\":\"Gateway\",\"metadata\":{\"annotations\":{},\"name\":\"gateway-update\",\"namespace\":\"ingress-apisix-e2e-tests-ssl-conflict-test-517966000\"},\"spec\":{\"gatewayClassName\":\"ingress-apisix-e2e-tests-ssl-conflict-test-517966000\",\"infrastructure\":{\"parametersRef\":{\"group\":\"apisix.apache.org\",\"kind\":\"GatewayProxy\",\"name\":\"apisix-proxy-config\"}},\"listeners\":[{\"hostname\":\"gateway-update-conflict.example.com\",\"name\":\"https\",\"port\":443,\"protocol\":\"HTTPS\",\"tls\":{\"certificateRefs\":[{\"name\":\"gateway-update-cert-b\"}],\"mode\":\"Terminate\"}}]}}\n"}},"spec":{"listeners":[{"hostname":"gateway-update-conflict.example.com","name":"https","port":443,"protocol":"HTTPS","tls":{"certificateRefs":[{"name":"gateway-update-cert-b"}],"mode":"Terminate"}}]}}
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:19:11+08:00 logger.go:67: to:
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:19:11+08:00 logger.go:67: Resource: "gateway.networking.k8s.io/v1, Resource=gateways", GroupVersionKind: "gateway.networking.k8s.io/v1, Kind=Gateway"
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:19:11+08:00 logger.go:67: Name: "gateway-update", Namespace: "ingress-apisix-e2e-tests-ssl-conflict-test-517966000"
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:19:11+08:00 logger.go:67: for: "/var/folders/dk/qv6ttnj97xj2nfshk30wfgt40000gn/T/Test%20SSL%2FTLS%20Conflict%20Detection%20Update%20scenario%20conflict%20detection%20should%20reject%20Gateway%20update%20that%20switches%20to%20a%20conflicting%20certificate2899429494": admission webhook "vgateway-v1.kb.io" denied the request: SSL configuration conflicts detected:
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:19:11+08:00 logger.go:67: - Host 'gateway-update-conflict.example.com' is already configured with a different certificate in ApisixTls/ingress-apisix-e2e-tests-ssl-conflict-test-517966000/tls-gateway-update
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:19:11+08:00 logger.go:67: Running command kubectl with args [--kubeconfig /tmp/api7-ingress-cluster.kubeconfig delete -f /var/folders/dk/qv6ttnj97xj2nfshk30wfgt40000gn/T/Test%20SSL%2FTLS%20Conflict%20Detection%20Update%20scenario%20conflict%20detection%20should%20reject%20Gateway%20update%20that%20switches%20to%20a%20conflicting%20certificate3638803373]
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:19:11+08:00 logger.go:67: ingressclass.networking.k8s.io "ingress-apisix-e2e-tests-ssl-conflict-test-517966000" deleted
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:19:11+08:00 logger.go:67: Running command kubectl with args [--kubeconfig /tmp/api7-ingress-cluster.kubeconfig delete -f /var/folders/dk/qv6ttnj97xj2nfshk30wfgt40000gn/T/Test%20SSL%2FTLS%20Conflict%20Detection%20Update%20scenario%20conflict%20detection%20should%20reject%20Gateway%20update%20that%20switches%20to%20a%20conflicting%20certificate3087957944]
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:19:11+08:00 logger.go:67: validatingwebhookconfiguration.admissionregistration.k8s.io "test-webhook-ingress-apisix-e2e-tests-ssl-conflict-test-517966000" deleted
Test SSL/TLS Conflict Detection Update scenario conflict detection should reject Gateway update that switches to a conflicting certificate 2025-10-15T14:19:11+08:00 logger.go:67: Configuring Kubernetes client using config file /tmp/api7-ingress-cluster.kubeconfig with context 
[38;5;10mâ€¢ [49.910 seconds][0m
[38;5;243m------------------------------[0m
[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m

[38;5;10m[1mRan 2 of 164 Specs in 118.300 seconds[0m
[38;5;10m[1mSUCCESS![0m -- [38;5;10m[1m2 Passed[0m | [38;5;9m[1m0 Failed[0m | [38;5;11m[1m1 Pending[0m | [38;5;14m[1m161 Skipped[0m
PASS | FOCUSED
FAIL	github.com/apache/apisix-ingress-controller/test/e2e/apisix	119.601s
FAIL
make: *** [e2e-test] Error 1
